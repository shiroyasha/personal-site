<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv='X-UA-Compatible' content='IE=edge;chrome=1' />
    <title>Actions and transformations in OOP based design &ndash; Igor Šarčević</title>
    <link rel="alternate" type="application/atom+xml" title="Atom Feed" href="/feed.xml" />
    <link href="/stylesheets/layout.css" media="screen" rel="stylesheet" type="text/css" />
    
    <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
    <link href="http://fonts.googleapis.com/css?family=Droid+Sans:400,700|Gentium+Basic&amp;subset=latin,latin-ext" rel="stylesheet" type="text/css">

  </head>
  <body>
    <div class="layout">
      
<nav>
  <a href="/"><i class="fa fa-home fa-2x"></i></a>
</nav>

<article class='postPage'>
  <header>
    <h1 class="title">Actions and transformations in OOP based design</h1>
    <!--<p>written by <a href="https://twitter.com/igor_sarcevic">@igor_sarcevic</a> ⌚ April 19, 2014</p>-->
  </header>

  <p>Object oriented programming comes so naturally when I am modeling real life
stuff, or creating abstract data types. But there is a whole range of problems
that are really hard to express using objects, or at least they are hard for me.
</p>
<pre class="highlight ruby"><span class="c1"># example of real life thing</span>
<span class="k">def</span> <span class="nf">Dog</span>
  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="nb">name</span><span class="p">)</span>
    <span class="vi">@name</span> <span class="o">=</span> <span class="nb">name</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">bark</span>
    <span class="nb">puts</span> <span class="s2">"bark"</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre>
<pre class="highlight ruby"><span class="c1"># example of abstract data type</span>
<span class="k">def</span> <span class="nf">Stack</span>
  <span class="k">def</span> <span class="nf">initialize</span>
    <span class="vi">@stack</span> <span class="o">=</span> <span class="o">[]</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">push</span><span class="p">(</span><span class="n">thing</span><span class="p">)</span>
    <span class="vi">@stack</span><span class="p">.</span><span class="nf">unshift</span><span class="p">(</span><span class="n">thing</span><span class="p">)</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">pop</span>
    <span class="vi">@stack</span><span class="p">.</span><span class="nf">shift</span><span class="p">()</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre>

<h1>Representing actions</h1>

<p>This is a problem I come across every so often. There are tasks where I have
to <strong>do</strong> something. To show a list, to send some data to the server, to
calculate some value, to filter some things. And there are a lot of ways to
resolve these problems. Most of them are incorrect, some of them are weird, but
all of them are somehow unnatural in an pure object oriented environment.</p>

<h1>Solution 1: Create a class for everything</h1>

<p>In the purest object oriented methodology I would address the above problems
by trying to find or invent a subject that will perform my actions. Then by
defining  a method in the subject I would implement my desired behavior.</p>

<p>For example if I want to send some data to the server I could write:</p>
<pre class="highlight ruby"><span class="k">def</span> <span class="nf">DataSender</span>
  <span class="k">def</span> <span class="nf">initiallize</span><span class="p">(</span><span class="n">server</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
     <span class="vi">@server</span> <span class="o">=</span> <span class="n">server</span>
     <span class="vi">@data</span> <span class="o">=</span> <span class="n">data</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">send</span>
     <span class="n">json</span> <span class="o">=</span> <span class="p">{</span>
        <span class="ss">:title</span> <span class="o">=&gt;</span> <span class="s2">"Hello server"</span><span class="p">,</span>
        <span class="ss">:body</span> <span class="o">=&gt;</span> <span class="vi">@data</span><span class="o">[</span><span class="s2">"value"</span><span class="o">]</span><span class="p">,</span>
        <span class="ss">:password</span> <span class="o">=&gt;</span> <span class="s2">"keyboard kat"</span>
    <span class="p">}</span>
    <span class="n">client</span> <span class="o">=</span> <span class="no">HttpClient</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">server</span><span class="p">.</span><span class="nf">ip_address</span><span class="p">,</span> <span class="ss">:port</span> <span class="o">=&gt;</span> <span class="mi">4567</span><span class="p">)</span>
    <span class="n">client</span><span class="p">.</span><span class="nf">send</span><span class="p">(</span><span class="n">json</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="n">data</span> <span class="o">=</span> <span class="p">{</span> <span class="ss">:value</span> <span class="o">=&gt;</span> <span class="s2">"nice to meet you"</span> <span class="p">}</span>
<span class="n">sender</span> <span class="o">=</span> <span class="no">DataSender</span><span class="p">.</span><span class="nf">new</span> <span class="n">my_server</span><span class="p">,</span> <span class="n">data</span>
<span class="n">sender</span><span class="p">.</span><span class="nf">send</span><span class="p">()</span>
</pre>

<p>But this is so weird, and unnatural I would say. Because the original thing
I wanted to do is to <strong>send</strong> some <strong>things</strong>. The notion of a <strong>DataSender</strong>
is artificial and creates an abstraction that doesn&rsquo;t give me more power and
neither does it take away from the complexity of the original problem.</p>

<p><strong>In fact it is an abstraction solely created for the sake of abstracting</strong>.
And abstractions lead to greater complexity, and also they create a harder
and more confusing environment for maintenance.</p>

<h1>Solution 2: Put the send method inside the Server class</h1>

<p>A different solution would be to put my send method inside the server&rsquo;s
class, and maybe to rename it a little to something like <strong>recieve</strong>.</p>
<pre class="highlight ruby"><span class="k">def</span> <span class="nf">Server</span>
   <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">ip_address</span><span class="p">)</span>
     <span class="vi">@ip_address</span> <span class="o">=</span> <span class="n">ip_address</span>
   <span class="k">end</span>

   <span class="c1"># ...</span>

   <span class="k">def</span> <span class="nf">recieve</span>
      <span class="c1"># something similiar as above</span>
   <span class="k">end</span>
<span class="k">end</span>
</pre>

<p>But there is a problem. I can now only create servers which must be able to
send out data. And usually this is not the case, because there are a lot of
servers from which I only want to read out data. Of course I could create a
<strong>could_recieve?</strong> method, but then I would need to check it every time
before I send out something.</p>

<p>The other solution is to create an inherited class named something like
<strong>ServerThatICanSendTo</strong>. But the name alone tells you that this is a
wrong path to take. So it seems that putting the <strong>send</strong> method inside
of the server class is a wrong idea after all.</p>

<h1>Solution 3: Creating static methods to deal with actions</h1>

<p>This is usually the way I handle these kind of problems in the object
oriented world. By creating a static method I am only connecting an action
with a namespace and I don&rsquo;t artificially create an abstraction for
performing an action. But where should I put this static method?</p>

<ul>
<li>Inside a subject?</li>
<li>Inside some collection of utility methods that are probably not even
connected in any way?</li>
<li>Or should I create some kind of a namespace wrapper for a collection
of connected utility methods?</li>
</ul>

<p>I don&rsquo;t know. I frankly I don&rsquo;t even like to think about this problem
too much, as it is obvious to me that there is no clear way of handling my
problems in an object oriented way.</p>

<p>The point of this way too long post is that <em>the object oriented paradigm
doesn&rsquo;t provide an easy and bulletproof way of handling utility methods
such as actions and transformations of data</em>.</p>

<p>But as always, I am perhaps/probably wrong. Feel free to correct me or to
show me an awesome solution.</p>

</article>

<div id="disqus_thread"></div>
<script type="text/javascript">
  /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
var disqus_shortname = 'shiroyashablog'; // required: replace example with your forum shortname
var disqus_identifier = '64cb3f84-c22d-46f3-9b1f-1045fa2478c0'; // required: replace example with your forum shortname

/* * * DON'T EDIT BELOW THIS LINE * * */
(function() {
 var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
 dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
 (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
 })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>



    </div>

    <div class="follow">
      <a href="https://twitter.com/igor_sarcevic" class="twitter-follow-button" data-show-count="false">Follow @igor_sarcevic</a>
      <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
    </div>

    <footer>
      Created with <strong>❤</strong> by Igor Šarčević 
    </footer>


<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-50657716-1', 'shiroyasha.github.io');
  ga('send', 'pageview');

</script>


  </body>
</html>
